<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fortrip.com.domain.board.qna.model.mapper.BoardQnaMapper">
    <select id="getTotalCount" resultType="_int">
 		SELECT COUNT(*) FROM QNA WHERE DELETE_YN = 'N'
 	</select>
 	<select id="selectQnaList" resultType="BoardQna">
	    SELECT *
	    FROM (
	        SELECT
	            ROWNUM AS RNUM,
	            Q.*
	        FROM (
	            SELECT *
	            FROM QNA
	            WHERE DELETE_YN = 'N'
	            ORDER BY QNA_NO DESC
	        ) Q
	    )
	    WHERE RNUM BETWEEN #{offset} + 1 AND #{offset} + #{boardCountPerPage}
	</select>
	 <insert id="insertQna" parameterType="com.fortrip.com.app.board.qna.dto.BoardQnaAddRequest">
	    <selectKey order="BEFORE" resultType="_int" keyProperty="qnaNo">
	        SELECT SEQ_QNA_NO.NEXTVAL FROM DUAL
	    </selectKey>
	    INSERT INTO QNA (
	        QNA_NO,
	        MEMBER_NO,
	        QNA_TITLE,
	        QNA_CONTENT,
	        QNA_PASSWORD
	        -- DEFAULT 값을 사용하는 컬럼들은 생략 가능
	    ) VALUES (
	        #{qnaNo},
	        #{memberNo},
	        #{qnaTitle},
	        #{qnaContent},
	        #{qnaPassword}
	    )
	</insert>
 	<select id="selectOneByNo" resultType="BoardQna">
	    SELECT *
	    FROM QNA
	    WHERE QNA_NO = #{qnaNo} AND DELETE_YN = 'N'
	</select>
 	<update id="deleteQna">
	    UPDATE QNA
	    SET DELETE_YN = 'Y'
	    WHERE QNA_NO = #{qnaNo}
	</update>
</mapper>