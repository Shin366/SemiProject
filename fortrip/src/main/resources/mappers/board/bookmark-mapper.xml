<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fortrip.com.domain.board.bookmark.model.mapper.BookmarkMapper">
	<select id="existsBookmark" resultType="int">
	    SELECT CASE WHEN COUNT(*) > 0 THEN 1 ELSE 0 END AS CNT
	    FROM BOOKMARK
	    WHERE MEMBER_NO = #{memberNo}
	      AND TARGET_TYPE = #{targetType}
	      AND TARGET_NO = #{targetNo}
	</select>

    <insert id="insertBookmark">
        INSERT INTO BOOKMARK (BOOKMARK_NO, MEMBER_NO, TARGET_TYPE, TARGET_NO, BOOKMARK_DATE)
        VALUES (SEQ_BOOKMARK_NO.NEXTVAL, #{memberNo}, #{targetType}, #{targetNo}, SYSDATE)
    </insert>

    <delete id="deleteBookmark">
        DELETE FROM BOOKMARK
        WHERE MEMBER_NO = #{memberNo}
          AND TARGET_TYPE = #{targetType}
          AND TARGET_NO = #{targetNo}
    </delete>
    
    <select id="countBookmarkByBoard" resultType="_int">
        SELECT COUNT(*)
        FROM BOOKMARK
        WHERE TARGET_TYPE = #{targetType}
          AND TARGET_NO = #{targetNo}
    </select>

</mapper>